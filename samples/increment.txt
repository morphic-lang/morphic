module Core = file "lib/core/core.txt"
  with { }
  expose { module Func, module String }

from Func expose { iterate, const, id }

incr(x: Int) : Int =
  x + 1

proc main(): () =
  let incr5 = iterate(incr, 5) in
  let five = const(incr5(0))([1, 2, 3]) in
  let five2 = const(incr5(0))(id) in
  do output("The following should both be 5:") then
  do output(String.int_to_string(five)) then
  do output(String.int_to_string(five2)) then
  ()
